process_contexts() {
  for CONTEXT in $@; do
    echo $CONTEXT
  done
}

usage() {
    figlet "k 10 s"
    cat <<EOT
k10s is a CLI that wraps k9s allowing you to start multiple k9s instances at once.

Usage: k10s [flags]

Flags:
    -c, --context   List of contexts.
    -h, --help      Help for k10s
EOT
    exit 0
}

if [ $# -eq 0 ]; then
    usage
fi

while [[ $# -gt 0 ]]; do
  case $1 in 
  -c | --context ) 
    shift
    contexts=()
    while [[ "$1" != "" && "$1" != -* ]]; do
        contexts+=("$1")
        shift
    done
    process_contexts "${contexts[@]}" # Call the function with all contexts
    ;;
  -h | --help )
    shift
    usage
    ;;
  * )
    shift
    usage
    ;;
  esac
  shift
done

#session="k9s-${env}"
#window="admin-window"
#tmux new-session -d -s $session -n $window
#tmux split-window -h -t $session:$window
#tmux split-window -h -t $session:$window
#tmux send-keys -t $session:$window.0 "tmux select-layout even-horizontal" C-m
#tmux send-keys -t $session:$window.0 "k9s --context $env-us" C-m
#tmux send-keys -t $session:$window.1 "k9s --context $env-eu" C-m
#tmux send-keys -t $session:$window.2 "k9s --context $env-ap" C-m
#tmux switch-client -t $session
